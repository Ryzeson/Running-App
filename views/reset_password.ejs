<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kale's Kilometers</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">

    <!-- Google fonts (title) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chicle&display=swap" rel="stylesheet">
    <!-- Google fonts (all other text)-->
    <link href="https://fonts.googleapis.com/css2?family=Quicksand&display=swap" rel="stylesheet">

</head>

<body class="d-flex flex-column">

    <%- include ("./navbar.ejs") %>

        <div class="container center-container">
            <div class="row">
                <div class="col-md-6 pl-5">
                    <h1 class="chicle-regular title">Kale's</h1>
                    <h1 class="chicle-regular title">Kilometers</h1>
                    <p>Join to track your workouts and update your progress! </p>
                </div>
                <div class="col-md-3 register-box ">
                    <% if(locals.username) { %>
                        <p>Hi <i>
                                <%= username%>
                            </i>, please enter your new password below.</p>
                        <form name="resetPassword" method="POST" action="/reset-password">
                            Password<br><input class="login-signup-field" type="password" name="password" required><br>
                            Confirm password<br><input class="login-signup-field" type="password"
                                name="confirm-password" required><br>
                            <!-- we want to pass username as well, so we know which user's password we are updating -->
                            <!-- note that we usually use id as the key, but we can't here because the user is not logged in. This should be one of the few places we have to rely on username instead of id-->
                            <input type="hidden" name="username" value="<%= username%>">
                            <input name="submit" class="submit login-signup-btn" type="submit" value="Update password">
                        </form>
                        <p class="small-text hidden" id="passwords-not-match-text">Passwords do not match</p>
                        <% } else {%>
                            <p>Your password has been successfully reset! You can now <a class="button" href="/">Log
                                    in</a>.</p>
                            <% } %>
                </div>
            </div>
        </div>

        <%- include ("./footer.ejs") %>

            <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
            <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
            <script src="scripts/signup.js"></script>
            <script src="scripts/utils.js"></script>
</body>

</html>